USE loja_sapatos;

CREATE TABLE cliente (
 id_cliente INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome VARCHAR(60) NOT NULL,
 cpf VARCHAR(14) NOT NULL UNIQUE,
 telefone VARCHAR(20),
  email VARCHAR(255) UNIQUE
 );
 
 CREATE TABLE funcionario (
 id_funcionario INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome VARCHAR(60) NOT NULL,
 cargo VARCHAR(50) NOT NULL,
 telefone VARCHAR(20)
 );
 
 CREATE TABLE fornecedor (
 id_fornecedor INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome VARCHAR(100) NOT NULL,
 cnpj VARCHAR(18) NOT NULL UNIQUE,
 telefone VARCHAR(20),
 email VARCHAR(255) UNIQUE
 );
 
 CREATE TABLE categoria (
 id_categoria INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome VARCHAR(60) NOT NULL
 );
 
 CREATE TABLE produto (
 id_produto INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome VARCHAR(100) NOT NULL,
 marca VARCHAR(80) NOT NULL,
 preco DECIMAL(10,2) NOT NULL,
 tamanho VARCHAR(20),
 cor VARCHAR(20),
 id_categoria INTEGER NOT NULL,
 FOREIGN KEY (id_categoria) REFERENCES categoria(id_categoria)
 );
 
 CREATE TABLE fornecedor_produto (
 id_fornecedor INTEGER NOT NULL,
 id_produto INTEGER NOT NULL,
 PRIMARY KEY (id_fornecedor, id_produto),
 FOREIGN KEY (id_fornecedor) REFERENCES fornecedor(id_fornecedor),
 FOREIGN KEY (id_produto) REFERENCES produto(id_produto)
 );
 
 CREATE TABLE estoque (
 id_estoque INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 quantidade INTEGER NOT NULL,
 localizacao VARCHAR(100),
 id_produto INTEGER NOT NULL,
 FOREIGN KEY (id_produto) REFERENCES produto(id_produto)
 );
 
 CREATE TABLE pedido (
 id_pedido INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 data_pedido DATE NOT NULL,
 status_pedido VARCHAR(20) NOT NULL,
 valor_total DECIMAL(10,2) NOT NULL,
 id_cliente INTEGER NOT NULL,
 id_funcionario INTEGER NOT NULL,
 FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente),
 FOREIGN KEY(id_funcionario) REFERENCES funcionario(id_funcionario)
 );
 
 CREATE TABLE pedido_produto (
 id_pedido INTEGER NOT NULL,
 id_produto INTEGER NOT NULL,
 PRIMARY KEY (id_pedido, id_produto),
 quantidade INTEGER NOT NULL,
 preco_unitario DECIMAL(10,2) NOT NULL,
 FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido),
 FOREIGN KEY (id_produto) REFERENCES produto(id_produto)
 );
 
 CREATE TABLE metodo (
 id_metodo INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nome_metodo_pagamento VARCHAR(30) NOT NULL
 );
 
 CREATE TABLE pagamento (
 id_pedido INTEGER NOT NULL,
 PRIMARY KEY (id_pedido),
 valor_pago DECIMAL(10,2) NOT NULL,
 data_pagamento DATE NOT NULL,
 status_pagamento VARCHAR(20) NOT NULL,
 id_metodo INTEGER NOT NULL,
 FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido),
 FOREIGN KEY (id_metodo) REFERENCES metodo(id_metodo)
 );
 
 CREATE TABLE entrega (
 id_pedido INTEGER NOT NULL,
 PRIMARY KEY (id_pedido),
 endereco VARCHAR(200) NOT NULL,
 data_entrega DATE NOT NULL,
 status_entrega VARCHAR(20) NOT NULL,
 id_funcionario INTEGER NOT NULL,
 FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido),
 FOREIGN KEY (id_funcionario) REFERENCES funcionario(id_funcionario)
 );
 
  CREATE TABLE devolucao (
 id_devolucao INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
 motivo VARCHAR(100) NOT NULL,
 status_devolucao VARCHAR (20) NOT NULL,
 data_devolucao DATE NOT NULL,
 id_pedido INTEGER NOT NULL,
 FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido)
 );
 
 
 
 
 